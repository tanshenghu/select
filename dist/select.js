define("widget/select/1.0.0/select",["$"],function(a,b,c){var d=a("$"),e=function(a){if(("string"==typeof a||a instanceof jQuery||a.nodeName)&&(a={trigger:a}),this.options=a,"undefined"==typeof this.options.trigger)throw new TypeError("select trigger is undefined");return this.options.trigger=d(this.options.trigger),"undefined"==typeof this.options.infiniteWidth&&(this.options.infiniteWidth=!1),"undefined"==typeof this.options.readonly&&(this.options.readonly=!0),this.init(),this.options.trigger};e.prototype={constructor:e,curNode:null,eleInit:function(){var a=this,b=function(b){b.on(a.options.eventType||"click",function(){var c=d(this);if(!c.hasClass("disabled")){var e=this.select,f=(c.find(".civalue").val(),"");e.children().each(function(a,b){b=d(b),"OPTGROUP"===b.prop("nodeName")?(f+='<div class="optgroup"><label>'+b.attr("label")+"</label>",b.children().each(function(){var a=d(this);f+='<a href="javascript:;" value="'+a.val()+'" title="'+a.text()+'" '+(a.is(":selected")?'class="active"':"")+">"+a.text()+"</a>"}),f+="</div>"):f+='<a href="javascript:;" value="'+b.val()+'" title="'+b.text()+'" '+(b.is(":selected")?'class="active"':"")+">"+b.text()+"</a>"}),a.options.trigger.next(".ui-select").removeClass("ui-select-focus"),a.curNode=c.addClass("ui-select-focus"),a.dropbox.data("curNode",a.curNode),a.dropbox.html(f).css({width:a.options.infiniteWidth===!1?c.outerWidth(!0):void 0,"min-width":c.outerWidth(!0),left:c.offset().left,top:c.offset().top+b.outerHeight(!0)+~~a.options.top}),f&&a.dropbox.slideDown("fast"),"function"==typeof a.options.open&&a.options.open.apply(c,[a.dropbox])}}).on("mousedown",function(a){a.stopPropagation()})};"SELECT"===this.options.trigger.prop("nodeName")&&(this.dropbox=d("#ui-selectdrop").length?d("#ui-selectdrop"):d("<div/>",{id:"ui-selectdrop",style:"position:absolute","class":"dropDownContent"}).appendTo("body"),this.options.trigger.each(function(c,e){e=d(e);var f=e.attr("ui-name"),g=e.is(":disabled"),h=e.css("width")?e.css("width"):getComputedStyle(e).width||"132px",i=h.match(/(\d+)(\w+|%)/),j=d('<span class="ui-select'+(g?" disabled":"")+'" style="width:'+(~~i[1]<=22?132:i[1])+i[2]+'"><input class="ciname" type="text"'+(a.options.readonly===!0||g?' readonly="readonly" onfocus="blur()"':"")+' value="'+e.find(":selected").text()+'" title="'+e.find(":selected").text()+'" style="width:'+((~~i[1]<=22?132:i[1])-22)+i[2]+'"><input value="civalue" type="hidden"'+(f?' name="'+f+'"':"")+' value="'+e.val()+'"><i></i></span>');"function"==typeof a.options.render&&a.options.render.call(e,j),e.hide().after(j),e[0]["ui-select"]=j,e[0].set_uival=function(){var a=d(this);this["ui-select"].find(".ciname").val(a.find(":selected").text()).end().find(".civalue").val(a.val())},j[0].select=e,b(j)}).on("set_uival",function(){this.set_uival()}),this.evt())},evt:function(){var a=this;this.dropbox.off("click","a").on("click","a",function(){var b=d(this),c=b.parent(),e=c.data("curNode");b.addClass("active").siblings("a").removeClass("active"),e.removeClass("ui-select-focus").find(".ciname").val(b.text()).attr("title",b.text()).end().find(".civalue").val(b.attr("value")||b.text()),e[0].select.val(b.attr("value")||b.text()).trigger("change"),c.slideUp("fast"),"function"==typeof a.options.change&&a.options.change.apply(c,[e[0].select,e,b.attr("value")||b.text()])}).on("mousedown",function(a){a.stopPropagation()}),d(document).on("mousedown",function(){a.dropbox.hide(),a.options.trigger.next(".ui-select").removeClass("ui-select-focus")})},init:function(){this.eleInit()}},c.exports=e});
